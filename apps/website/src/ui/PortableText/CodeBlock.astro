---
import { type SupportedLanguages } from '@raulmelo/core/config';

import { getIntl } from '@/infrastructure/i18n/getServerSideLocales.server';

import CodeBlockSvelte from './CodeBlock/CodeBlock.svelte';

type Props = {
  node: {
    code: string;
    highlightedLines: string;
    language?: string;
    filename?: string;
  };
};
const { code, highlightedLines, language, filename } = Astro.props.node;
const { lang } = Astro.params as { lang: SupportedLanguages };

const intl = getIntl(lang);
---

<CodeBlockSvelte
  client:load
  code={code}
  copyTitle={intl.formatMessage({ id: `blogPost.copyButton.title` })}
  copyTooltipTitle={intl.formatMessage({ id: `blogPost.copyButton.success` })}
  filename={filename}
  highlightedLines={highlightedLines}
  language={language}
/>

---
import { PortableText } from 'astro-portabletext';

import BigQuote from './BigQuote.astro';
import CodeBlock from './CodeBlock.astro';
import { CodePen } from './CodePen';
import Divider from './Divider.astro';
import Gif from './Gif.astro';
import HeadingWithLink from './HeadingWithLink.astro';
import Highlight from './Highlight.astro';
import Image from './Image.astro';
import ImageSlider from './ImageSlider.astro';
import InternalLink from './InternalLink.astro';
import Strikethrough from './Strikethrough.astro';
import { Tweet } from './Tweet';
import { YouTube } from './YouTube';

type PortableTextProps = Parameters<typeof PortableText>[0];

export interface Props {
  value: PortableTextProps[`value`];
  components?: PortableTextProps[`components`];
}

const { value } = Astro.props;

const components = {
  type: {
    divider: Divider,
    image: Image,
    detailedImage: Image,
    gif: Gif,
    imageSlider: ImageSlider,
    code: CodeBlock,
    codePen: CodePen,
    tweet: Tweet,
    youtubeVideo: YouTube,
  },
  mark: {
    strikethrough: Strikethrough,
    highlight: Highlight,
    internalLink: InternalLink,
  },
  block: {
    h2: HeadingWithLink,
    h3: HeadingWithLink,
    h4: HeadingWithLink,
    h5: HeadingWithLink,
    h6: HeadingWithLink,
    bigQuote: BigQuote,
  },
} as any;

const portableTextProps = {
  value: value,
  components,
};
---

<PortableText {...portableTextProps} />

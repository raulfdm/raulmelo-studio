---
import { getIntl } from '@/infrastructure/i18n/getServerSideLocales.server';
import type { SupportedLanguages } from '@raulmelo/core';
import { CodeBlock } from '@raulmelo/ui';

type Props = {
  node: {
    code: string;
    highlightedLines: string;
    language?: string;
    filename?: string;
  };
};
const { code, highlightedLines, language, filename } = Astro.props.node;
const { lang } = Astro.params as { lang: SupportedLanguages };

const intl = getIntl(lang);
---

<CodeBlock
  client:load
  code={code}
  highlightedLines={highlightedLines}
  language={language}
  filename={filename}
  copyTitle={intl.formatMessage({ id: 'blogPost.copyButton.title' })}
  copyTooltipTitle={intl.formatMessage({ id: 'blogPost.copyButton.success' })}
/>
